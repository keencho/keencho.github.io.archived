---
layout: post
title: Q&A 관련 소스
categories: [Front-End]
tags: [jQuery, css, Ajax, Codeigniter]
description: Q&A 관련 jQuery, Ajax 소스
comments: true
---

![qna](https://user-images.githubusercontent.com/36055500/54456771-f871ea80-47a2-11e9-8ea2-53fe6456feb6.JPG)
<br>
### 제목을 클릭했을시 내용 보기  
제목을 클릭하기 전에는 내용이 보이지 않도록 미리 설정해놓고, 제목을 클릭해야 내용이 보이도록하는 jQuery 소스이다.  
물론 본인이 아닌 비밀글은 볼 수 없다.  
<br>
css에 의해 감쳐줘 있는 accordian을 클릭시 아래로 <tr>태그에 관한 내용을 출력한는 jQuery 소스이다.  
일반적인 .clock메소드와는 다르게 .on을 사용하였는데, 이유는 아래 기술할 aJax를 호출후 위 jQuery 소스가 작동하지 않는 오류가 있기 때문이다.  
~~~javascript
$(document).ready(function () {
	$(document).on('click', '.accordian', function() {
		$(".accordian").next('tr').slideUp(1);
		if(!$(this).next().is(":visible"))
		{
			$(this).next().slideDown(1);
		}
	})
})
~~~  
<br>
### Q&A Ajax 소팅  
Q&A 테이블에 미리 4가지의 분류타입(배송, 환불, 기타 외1)을 지정해놓고, Ajax로 관련 메소드를 호출하는 시스템이다.  
성공시, id가 qsort_table인 태그를 숨기고 새롭게 불러오는데, 미리 지정해놓은 url에서 데이터를 불러오는 형식이다.  
~~~javascript
function qnasort() {
	var qno = document.getElementById("qnasort").value;
		$(function(){
			$.ajax({					
				url: "<?=base_url();?>CI/Computer/view/no/<?=$row->no?>/qnasort/" + qno,
				type: "post",
				data:{
				"qnasort":qno
			},
			dataType:"html",
			success : function() {
				$("#qsort_table").hide();
				$("#qsort_table" ).load( '<?=base_url();?>CI/Computer/view/no/<?=$row->no?>/qnasort/' + qno + ' div#qsort_table').show();
			},
		});
	});
}
~~~  
<br>
### Q&A Pagination  
Q&A도 너무 많으면 페이지가 지저분해지기 때문에 pagination 처리를 해줘야 한다.  
문제는 일반적인 pagination 방식을 적용하면 페이지를 리로딩해오기 때문에 관련상품이다 기타 값들이 변할 수 있다.  
따라서 Ajax로 처리하였다.

다음 페이지를 선택하면, 현재의 테이블은 숨기고 미리 정해놓은 url태그의 테이블 데이터를 가져와 다시 화면에 뿌려주는 형식이다.
~~~javascript
$(function(){
  $(document).on("click","#paginationajax a",function() {  
    $.ajax({
      url: $(this).attr("href"),
      type: "POST",
      dataType:"html",
      success: function(){
        $("#qsort_table").hide();
        $("#qsort_table").load(this.url + ' div#qsort_table').show();
      }
    });
    return false;
  });
});
~~~   
